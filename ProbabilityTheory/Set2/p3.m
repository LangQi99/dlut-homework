% 3. 基于问题1和2，讨论当Y = 2X^n + 3，n分别取0,1,5,20,50时，协方差Cov(X,Y)的变化，进而讨论X和Y的相关系数的变化。

% 加载数据
load('data.mat');

% 定义n值
n_values = [0, 1, 5, 20, 50];

% 计算不同n值下的协方差和相关系数
fprintf('\n=== 不同n值下的协方差和相关系数分析 ===\n');
fprintf('----------------------------------------------------\n');
fprintf('n值              协方差          相关系数        函数关系\n');
fprintf('----------------------------------------------------\n');

for n = n_values
    Y = 2 * X.^n + 3;
    Cov_XY = cov(X, Y);
    Corr_XY = corrcoef(X, Y);

    if abs(Cov_XY(1,2)) > 1000
        fprintf('%-16d %-15.4e %-10.4f Y=2X^%d+3\n', n, Cov_XY(1,2), Corr_XY(1,2), n);
    else
        fprintf('%-16d %-15.4f %-10.4f Y=2X^%d+3\n', n, Cov_XY(1,2), Corr_XY(1,2), n);
    end
end

fprintf('----------------------------------------------------\n');
fprintf('分析：\n');
fprintf('1. 当n=0时，Y为常数，协方差和相关系数均为0\n');
fprintf('2. 当n=1时，Y与X呈线性关系，相关系数为1\n');
fprintf('3. 随着n增大，X和Y的非线性关系增强，相关系数逐渐减小\n');